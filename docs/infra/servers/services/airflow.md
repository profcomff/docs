# Airflow

## Что это такое?

Это библиотека (ну или набор библиотек) для разработки, планирования и мониторинга рабочих процессов. Основная особенность Airflow: для описания (разработки) процессов используется код на языке Python.

Основная сущность — это Directed Acyclic Graph.

DAG — это некоторое смысловое объединение ваших задач, которые вы хотите выполнить в строго определенной последовательности по определенному расписанию

Используется это все для работы с данными, их обработки, переливам из одной таблицы в другую и т.д.

## Как настроить?
Сам образ Airflow, который деплоится в виде докер контейнера, находится [здесь](https://github.com/profcomff/dwh-airflow)

Это репозиторий, который содержит в себе сборочный файл, конфиги и т.д.

Сборка и развертывание идет на каждый слитый PR(тест) и при создании релизов(прод)

Пайплайны лежат [здесь](https://github.com/profcomff/dwh-pipelines). Это то, ччто запускает Airflow для работы с данными.

[Тут](https://github.com/profcomff/dwh-definitions) лежат схемы данных и миграции.

То есть, настраивать компонент в целом не надо, он поднимается через CI/CD контур.

В репозитории лишь лежит доступ к базе данных и все.

При падениях обычно помогает простой перезапуск.

## Схема развертывания сейчас

Резвернут 1 инстанс в продовой среде и 1 инстанс в тестовой среде для инструмента проверки доступности сети(пингер).

Лежит в папке `srvc__postgres_db`

## Ссылки
[Официальный сайт](https://airflow.apache.org/docs/)

[Статья про Airflow](https://habr.com/ru/companies/vk/articles/339392/)